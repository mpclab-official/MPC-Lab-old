<% let currentPage = 'article' %>
<!DOCTYPE html>
<html>

<head>
    <%- include('../partial/head.ejs', { currentPage, pageStyle }) %>
</head>

<body data-language="<%=language_code %>" data-article="<%=JSON.stringify(article) %>">
    <%- include('../partial/page-includes.ejs') %>
    <%- include('../partial/header.ejs', { language_code, userData }) %>
    
    <main>
        <div class="page-main-content">
            <div class="left-side-block" id="leftScroll">
                <div class="block-inner-content" style="background-color: var(--card-bg-color);">
                    <h1 class="text-center" style="margin-top: 0; padding-top: 20px;"><%=article.title %></h1>
                    <p style="font-size: x-small; margin-left: 5%; width: fit-content; display: inline; color: var(--hr-color);"><%=new Date(article.publish_date).toLocaleString(language_code, { weekday: 'short', year: 'numeric', month: 'short', day: 'numeric', hour: 'numeric', minute: 'numeric', second: 'numeric', timeZoneName: 'short' }); %></p>
                    <p style="font-size: x-small; margin-left: 3%; width: fit-content; display: inline; color: var(--hr-color);"><%=lan_views %>: <%=article.views %></p>
                    <hr width="90%">

                    <!-- Include Quill style file -->
                    <link href="https://cdn.quilljs.com/1.3.4/quill.snow.css" rel="stylesheet">

                    <!-- Create an editor container -->
                    <div id="editor" style="border: none;">
                        
                    </div>

                    <!-- Include Quill library file -->
                    <script src="https://cdn.quilljs.com/1.3.4/quill.js"></script>

                    <!-- Initialize Quill editor -->
                    <script>
                    var toolbarOptions = [
                        ['bold', 'italic', 'underline', 'strike'],             // Toggle buttons
                        ['blockquote', 'code-block'],
                        [{ 'header': 1 }, { 'header': 2 }],                    // User-defined button values
                        [{ 'list': 'ordered' }, { 'list': 'bullet' }],
                        [{ 'script': 'sub' }, { 'script': 'super' }],          // Subscript/Superscript
                        [{ 'indent': '-1' }, { 'indent': '+1' }],              // Decrease indent/Increase indent
                        [{ 'direction': 'rtl' }],                              // Text direction
                        [{ 'size': ['small', false, 'large', 'huge'] }],       // User-defined dropdown
                        [{ 'header': [1, 2, 3, 4, 5, 6, false] }],
                        [{ 'color': [] }, { 'background': [] }],               // Theme default dropdown, using values provided by the theme
                        [{ 'font': [] }],
                        [{ 'align': [] }],
                        ['link', 'image', 'video'],                            // Add image, link, video buttons
                        ['clean'],                                             // Clear formatting
                        ['formula'],                                           // Math formula button
                    ];

                    var quill = new Quill('#editor', {
                        modules: {
                            toolbar: false
                        },
                        readOnly: true,
                        theme: 'snow'
                    });

                    const article = JSON.parse(document.body.dataset.article);
                    let delta = article.content;
                    quill.setContents(delta);
                    </script>
                    </div>
                </div>
                <div class="right-side-block" id="rightScroll">
                    <div class="block-inner-content">
                        <div class="card large-card">
                            <table>
                                <tr>
                                    <td><div class="avatar"><img src="/users-avatar/<%=author.avatarUrl %>"></div></td>
                                    <td><h3 class="card-title"><%=author.userName %></h3></td>
                                </tr>
                            </table>
                        </div>
                        <div class="card large-card">
                            <h3 class="text-left"><%=lan_about %></h3>
                            <p><%=article.about %></p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="article-side-bar">
                <button><embed src="/assets/svg/icons/like.svg"></button>
                <button><embed src="/assets/svg/icons/star.svg"></button>
                <button><embed src="/assets/svg/icons/coin.svg"></button>
                <button><embed src="/assets/svg/icons/forward.svg"></button>
            </div>
    </main>

    <%- include('../partial/footer.ejs') %>
    <%- include('../partial/mobile-navigation-bar.ejs') %>
</body>

</html>
<header class="main-header">
    <div class="logo-container">
        <img src="<%- logo %>" class="logo">
        <img src="<%- logo_s %>" class="logo_s">
    </div>
    <nav>
        <ul>
            <li class="main-header-navigation-drop-down"><a>â‰¡</a></li>
            <% navigation_translate_pack.forEach(function(item){%>
                <li class="main-header-navigation-drop-down-child"><a href="<%=item.url %>">
                        <%=item.name %>
                    </a></li>
                <% }); %>
        </ul>
        <div class="main-header-spacer"></div>
        <form action="/<%=language_code %>/search">
            <input id="searching-bar" name="search">
            <button><%- lan_search %></button>
        </form>
        <div id="user-avatar-div">
            <% if(userData.avatarUrl){ %>
                <div id="user-avatar" class="avatar"><img
                        src="/users-avatar/<%=userData.avatarUrl %>"></div>
                <div class="user-avatar-dropdown">
                    <button onclick="window.location='/<%=language_code %>/my'"><%- lan_my %></button>
                    <button onclick="window.location='/<%=language_code %>/dashboard'"><%- lan_dashboard %></button>
                    <button onclick="window.location='/<%=language_code %>/settings'"><%- lan_settings %></button>
                    <button onclick="window.location='/<%=language_code %>/logout'"><%- lan_logout %></button>
                </div>
                <script>
                    let userAvatar = document.getElementById('user-avatar-div');
                    let userAvatarDropdown = document.getElementsByClassName('user-avatar-dropdown')[0];
                    userAvatar.addEventListener('mouseover', function () {
                        userAvatarDropdown.style.display = 'flex';
                    });
                    function checkVisibility() {
                        let menux = userAvatarDropdown.offsetLeft;
                        let menuy = userAvatarDropdown.offsetTop;
                        let menuX = menux + userAvatarDropdown.offsetWidth;
                        let menuY = menuy + userAvatarDropdown.offsetHeight;

                        let event = window.event;
                        let mouseX = event.clientX;
                        let mouseY = event.clientY;

                        if (mouseX < menux || mouseX > menuX || mouseY < menuy || mouseY > menuY) {
                            userAvatarDropdown.style.display = 'none';
                        }
                    }
                    userAvatar.addEventListener('mouseout', function () {
                        checkVisibility();
                    });
                    userAvatarDropdown.addEventListener('mouseover', function () {
                        userAvatarDropdown.style.display = 'flex';
                    });
                    userAvatarDropdown.addEventListener('mouseout', function () {
                        checkVisibility();
                    });
                </script>
                <% }else{ %>
                    <button class="login-register-button" id="login-register-button"
                        onclick="window.location='/<%=language_code %>/login'"><%- lan_login %> | <%- lan_register
                                %></button>
                    <button class="login-button" id="login-button"
                        onclick="window.location='/<%=language_code %>/login'"><%- lan_login %></button>
                    <% } %>
        </div>
    </nav>
</header>